/* ===========================
   SMS Sync â€” styles.css
   Mobile-first, accessible, blue-gradient theme
   =========================== */

/* ---------- CSS Variables ---------- */
:root {
  /* Brand */
  --brand-start: #4AA3FF;
  --brand-end: #0D53DA;

  /* Light palette */
  --bg: #f6f8fc;            /* very light blue/gray surface */
  --surface: #ffffff;
  --text: #111827;          /* near-black */
  --muted-text: #4b5563;    /* slate-600 */
  --border: #e5e7eb;        /* gray-200 */
  --elev: 0 1px 2px rgba(0,0,0,.06), 0 4px 12px rgba(0,0,0,.06);

  /* States */
  --success: #16a34a;
  --warning: #f59e0b;
  --danger: #e11d48;

  /* Components */
  --chip-bg: #eef2ff;
  --chip-text: #1e40af;
  --menu-bg: #fff;
  --menu-border: #e5e7eb;

  /* Typography & spacing */
  --radius: 14px;
  --radius-lg: 18px;
  --radius-sm: 10px;
  --shadow: 0 8px 24px rgba(0,0,0,.08);
  --ring: 0 0 0 3px rgba(13, 83, 218, .18);

  /* Layout */
  --bar-h: 56px;
  --tabs-h: 44px;
  --pane-gap: 0;
}

/* Dark theme overrides */
html[data-theme="dark"] {
  --bg: #0b1220;
  --surface: #0f172a;
  --text: #e5e7eb;
  --muted-text: #94a3b8;
  --border: #1f2937;
  --elev: 0 1px 2px rgba(0,0,0,.25), 0 6px 20px rgba(0,0,0,.35);

  --chip-bg: #172554;
  --chip-text: #c7d2fe;
  --menu-bg: #0f172a;
  --menu-border: #1f2937;

  --ring: 0 0 0 3px rgba(74, 163, 255, .28);
}

/* Auto theme respects OS pref when html[data-theme="auto"] */
@media (prefers-color-scheme: dark) {
  html[data-theme="auto"] {
    --bg: #0b1220;
    --surface: #0f172a;
    --text: #e5e7eb;
    --muted-text: #94a3b8;
    --border: #1f2937;
    --elev: 0 1px 2px rgba(0,0,0,.25), 0 6px 20px rgba(0,0,0,.35);

    --chip-bg: #172554;
    --chip-text: #c7d2fe;
    --menu-bg: #0f172a;
    --menu-border: #1f2937;

    --ring: 0 0 0 3px rgba(74, 163, 255, .28);
  }
}

/* ---------- Base ---------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  height: 100%;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  color-scheme: light dark;
}

img { display: block; max-width: 100%; }

a { color: linear-gradient(var(--brand-start), var(--brand-end)); text-decoration: none; }
a:hover { text-decoration: underline; }

:focus-visible {
  outline: none;
  box-shadow: var(--ring);
  border-radius: 8px;
}

/* Utilities */
.muted { color: var(--muted-text); }
.mt-8 { margin-top: 8px; }
.ellipsis { overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.show-on-mobile { display: inline-flex; }
.show-on-desktop { display: none; }

/* ---------- App Bar ---------- */
.app-bar {
  position: sticky;
  top: 0;
  z-index: 50;
  height: var(--bar-h);
  padding: 0 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background:
    linear-gradient(90deg, var(--brand-start), var(--brand-end));
  color: #fff;
}

.app-bar__left, .app-bar__right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo {
  width: 32px; height: 32px; border-radius: 50%;
  background: #fff2; object-fit: cover;
}

.logo-lg { border-radius: 50%; }

.app-title {
  font-weight: 700;
  letter-spacing: .2px;
}

.avatar {
  width: 28px; height: 28px; border-radius: 50%;
  background: #fff2;
  color: #fff;
  font-weight: 700;
  display: grid; place-items: center;
  font-size: 12px;
}

/* Kebab menu container to anchor absolute menu */
.app-bar__right { position: relative; }

/* ---------- Search Bar ---------- */
.search-bar {
  position: sticky;
  top: var(--bar-h);
  z-index: 40;
  padding: 10px 12px;
  backdrop-filter: blur(6px);
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  background: color-mix(in oklab, var(--bg) 88%, transparent);
  border-bottom: 1px solid var(--border);
}

.search-field {
  display: grid;
  grid-template-columns: 24px 1fr 36px;
  align-items: center;
  gap: 6px;
  padding: 8px 8px 8px 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--elev);
}

.search-field input {
  border: 0;
  outline: 0;
  background: transparent;
  color: var(--text);
  font-size: 14px;
}

.sort-toggle .chip {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 12px;
  border-radius: 999px;
  background: var(--chip-bg);
  color: var(--chip-text);
  border: 1px solid color-mix(in oklab, var(--chip-bg), #000 6%);
}

/* ---------- Tabs / Filters ---------- */
.tabs {
  position: sticky;
  top: calc(var(--bar-h) + 58px);
  z-index: 39;
  display: flex;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
}

.tab {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--muted-text);
  font-weight: 600;
}

.tab.is-active {
  background: linear-gradient(90deg, var(--brand-start), var(--brand-end));
  color: #fff;
  border-color: transparent;
}

/* ---------- Buttons & Icon Buttons ---------- */
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  box-shadow: var(--elev);
}

.btn:hover { filter: brightness(0.98); }

.btn-primary {
  background: linear-gradient(135deg, var(--brand-start), var(--brand-end));
  color: #fff;
  border: none;
}

.btn-secondary {
  background: var(--surface);
}

.btn-ghost {
  background: transparent;
  border: 1px dashed var(--border);
}

.btn-danger {
  background: color-mix(in oklab, var(--danger), #000 0%);
  color: #fff;
  border: none;
}

.icon-btn {
  appearance: none;
  background: transparent;
  border: none;
  color: inherit;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px; height: 36px;
  border-radius: 10px;
}

.icon-btn:hover {
  background: #ffffff20;
}

.material-symbols-rounded { font-variation-settings: 'wght' 500; }

/* ---------- Login View ---------- */
.view--login {
  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: 24px 12px;
}

.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: var(--shadow);
}

.login-card {
  width: min(520px, 100%);
  padding: 24px;
}

.login-brand {
  display: grid; place-items: center; text-align: center; gap: 8px; margin-bottom: 12px;
}
.brand-title { margin: 6px 0 0; }
.brand-subtitle { margin: 0; color: var(--muted-text); }

.form { display: grid; gap: 12px; }

.form-row { display: grid; gap: 6px; }
.form-row--inline {
  margin-top: 4px;
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}

.form-row label { font-weight: 600; }
.form-row input[type="email"],
.form-row input[type="password"] {
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
}

.password-field {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--surface);
}
.password-field input {
  border: 0; padding: 12px; outline: 0; background: transparent; color: var(--text);
}
.password-field .icon-btn { width: 40px; height: 40px; color: var(--muted-text); }

.field-hint { min-height: 18px; font-size: 12px; color: var(--muted-text); }
.form-error {
  margin-top: 6px;
  padding: 10px 12px;
  background: color-mix(in oklab, var(--danger), #fff 85%);
  color: color-mix(in oklab, var(--danger), #000 10%);
  border: 1px solid color-mix(in oklab, var(--danger), #000 20%);
  border-radius: 12px;
}

/* ---------- App View & Two-Pane Layout ---------- */
.view--app { min-height: 100dvh; }

.two-pane {
  display: grid;
  grid-template-columns: 1fr; /* mobile */
  gap: var(--pane-gap);
}

/* List Pane */
.pane--list {
  min-height: calc(100dvh - var(--bar-h) - var(--tabs-h) - 62px);
  padding-bottom: 80px; /* space for mobile FAB bar */
}

/* Detail Pane */
.pane--detail {
  position: relative;
  min-height: calc(100dvh - var(--bar-h) - var(--tabs-h) - 10px);
  border-top: 1px solid var(--border);
  background: var(--surface);
}

/* Desktop breakpoint: two panes */
@media (min-width: 900px) {
  .two-pane {
    grid-template-columns: 380px minmax(0, 1fr);
    border-top: 1px solid var(--border);
  }
  .pane--list {
    border-right: 1px solid var(--border);
    padding-bottom: 0;
  }
  .pane--detail {
    border-top: none;
  }
  .show-on-mobile { display: none !important; }
  .show-on-desktop { display: inline-flex !important; }
}

/* ---------- Pull to Refresh ---------- */
.ptr {
  height: 48px;
  display: grid; place-content: center;
  color: var(--muted-text);
}

/* ---------- Batch Bar ---------- */
.batch-bar {
  position: sticky;
  top: calc(var(--bar-h) + 58px + var(--tabs-h));
  z-index: 41;
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  box-shadow: var(--elev);
}
.batch-actions { display: flex; gap: 4px; }
.batch-count { font-weight: 600; }

/* ---------- List / Items ---------- */
.list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.item {
  position: relative;
  display: grid;
  grid-template-columns: auto 42px 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 12px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}

.item:hover { background: color-mix(in oklab, var(--surface), #000 3%); }

.item.unread .sender { font-weight: 800; }
.item.unread::before {
  content: "";
  width: 6px; height: 6px;
  background: var(--brand-end);
  border-radius: 50%;
  position: absolute; left: 6px; top: 50%; transform: translateY(-50%);
}

/* Checkbox */
.select-box { display: none; }
@media (min-width: 900px) {
  .select-box { display: inline-flex; }
}

/* Avatars */
.avatar--sender {
  width: 36px; height: 36px; border-radius: 50%;
  display: grid; place-items: center;
  font-weight: 700; font-size: 13px;
  color: #fff;
  background: linear-gradient(135deg, var(--brand-start), var(--brand-end));
}

/* Item main */
.item-main { min-width: 0; }
.item-top {
  display: flex; align-items: baseline; justify-content: space-between; gap: 8px;
}
.sender { font-size: 15px; }
.time {
  font-size: 12px; color: var(--muted-text);
}
.snippet {
  font-size: 13px; color: var(--muted-text); margin-top: 2px;
}
.tags { margin-top: 6px; display: flex; gap: 6px; }
.tags::before { content: ""; }

.item-actions { position: relative; display: inline-flex; gap: 2px; }
.star-btn[aria-pressed="true"] .material-symbols-rounded {
  font-variation-settings: 'FILL' 1, 'wght' 600;
  color: #f59e0b; /* amber */
}

/* Overflow menu per item (absolute) */
.menu.item-menu {
  position: absolute;
  top: 42px; right: 0;
}

/* ---------- Skeletons ---------- */
.list--skeleton .item-skel {
  height: 64px;
  background:
    linear-gradient(90deg,
      color-mix(in oklab, var(--surface), #000 5%) 25%,
      color-mix(in oklab, var(--surface), #000 9%) 37%,
      color-mix(in oklab, var(--surface), #000 5%) 63%);
  background-size: 400% 100%;
  animation: shimmer 1.2s infinite linear;
  border-bottom: 1px solid var(--border);
}
@keyframes shimmer {
  0% { background-position: 100% 0; }
  100% { background-position: 0 0; }
}

/* ---------- Empty state ---------- */
.empty {
  padding: 40px 16px;
  text-align: center;
  color: var(--muted-text);
}
.empty-title { margin: 10px 0 4px; }
.empty .btn { margin-top: 10px; }

/* ---------- Detail Pane ---------- */
.detail-header {
  position: sticky; top: 0; z-index: 5;
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  padding: 10px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}

.detail-title { display: grid; gap: 4px; }
.sender-name { margin: 0; }
.meta { color: var(--muted-text); font-size: 12px; }

.detail-actions { display: inline-flex; gap: 4px; position: relative; }

.detail-body {
  padding: 12px 14px 80px;
}

.message-text {
  margin: 0;
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Roboto Mono", monospace;
  font-size: 14px;
  background: color-mix(in oklab, var(--surface), #000 3%);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.detail-footer {
  margin-top: 12px;
  display: flex; gap: 8px; justify-content: flex-end;
}

/* Placeholder (desktop) */
.detail-placeholder {
  height: 60vh;
  display: grid; place-content: center;
  gap: 8px;
  color: var(--muted-text);
  text-align: center;
}

/* OTP chip */
.otp-chip {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  background: var(--chip-bg);
  color: var(--chip-text);
  border: 1px solid color-mix(in oklab, var(--chip-bg), #000 6%);
  margin-bottom: 10px;
}
.chip.chip--action {
  padding: 6px 10px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--brand-start), var(--brand-end));
  color: #fff;
  border: none;
}

/* ---------- Menus (kebab, detail, item) ---------- */
.menu {
  min-width: 220px;
  background: var(--menu-bg);
  border: 1px solid var(--menu-border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 6px;
}
.menu[hidden] { display: none; }

.menu-item {
  width: 100%;
  background: transparent;
  color: var(--text);
  border: none;
  display: flex; align-items: center; gap: 10px;
  padding: 10px 10px;
  border-radius: 10px;
  text-align: left;
}
.menu-item:hover { background: color-mix(in oklab, var(--surface), #000 5%); }
.menu-item.danger { color: var(--danger); }

/* Position for top app menu */
#appMenu {
  position: absolute;
  top: calc(100% + 6px); right: 6px;
}

/* ---------- FAB Bar (mobile) ---------- */
.fab-bar {
  position: fixed; inset: auto 12px 12px 12px;
  display: flex; gap: 10px; justify-content: flex-end;
  z-index: 45;
}
.fab {
  width: 48px; height: 48px; border-radius: 16px;
  border: none;
  background: linear-gradient(135deg, var(--brand-start), var(--brand-end));
  color: #fff;
  box-shadow: var(--shadow);
}

/* ---------- Dialogs ---------- */
.dialog {
  border: none;
  padding: 0;
  background: transparent;
}
.dialog::backdrop {
  background: rgba(2,6,23,.5);
  backdrop-filter: blur(3px);
}
.dialog .dialog__content {
  width: min(560px, 92vw);
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  overflow: hidden;
}
.dialog__header, .dialog__footer {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
}
.dialog__footer { border-top: 1px solid var(--border); border-bottom: none; }
.dialog__body { padding: 12px 14px; display: grid; gap: 12px; }

/* Settings form bits */
.settings-row {
  display: grid; grid-template-columns: 160px 1fr; align-items: center; gap: 10px;
}
.settings-label { color: var(--muted-text); }
.settings-value { font-weight: 600; }
.segmented {
  display: inline-grid; grid-auto-flow: column; gap: 0;
  background: color-mix(in oklab, var(--surface), #000 6%);
  padding: 4px; border-radius: 12px; border: 1px solid var(--border);
}
.segmented input[type="radio"] { display: none; }
.segmented label {
  padding: 8px 12px; border-radius: 10px; cursor: pointer; color: var(--muted-text);
}
.segmented input[type="radio"]:checked + label {
  background: var(--surface);
  color: var(--text);
  box-shadow: var(--elev);
}

/* ---------- Snackbar & Toast ---------- */
.snackbar, .toast {
  position: fixed;
  left: 50%; transform: translateX(-50%);
  bottom: 16px;
  z-index: 60;
  display: inline-flex; align-items: center; gap: 10px;
  padding: 10px 14px;
  border-radius: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
}

.toast { bottom: 76px; color: var(--danger); border-color: color-mix(in oklab, var(--danger), #000 20%); }

/* ---------- Keyboard Help ---------- */
.kbd-help {
  position: fixed; bottom: 14px; right: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 10px 12px;
  font-size: 12px; color: var(--muted-text);
}
.kbd-help kbd {
  background: color-mix(in oklab, var(--surface), #000 8%);
  border: 1px solid var(--border);
  border-bottom-width: 2px;
  border-radius: 6px;
  padding: 1px 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Roboto Mono", monospace;
}

/* ---------- Links ---------- */
.link { color: #0b63ff; }
html[data-theme="dark"] .link,
html[data-theme="auto"][data-theme-applied="dark"] .link {
  color: #93c5fd;
}

/* ---------- Noscript helper ---------- */
.noscript-msg {
  position: sticky; top: 0;
}

/* ---------- Hide [hidden] ---------- */
[hidden] { display: none !important; }
